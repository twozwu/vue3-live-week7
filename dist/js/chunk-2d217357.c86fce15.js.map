{"version":3,"sources":["webpack:///./src/views/Profile.vue","webpack:///./src/views/Profile.vue?5937"],"names":["class","for","scope","href","active","isLoading","ref","createOrder","errors","id","name","type","form","user","email","placeholder","rules","tel","address","rows","message","carts","item","key","to","product","src","imageUrl","alt","title","style","$filter","currency","price","qty","unit","total","final_total","icon","disabled","Object","keys","length","checkData","components","Loading","data","apiUrl","apiPath","loadingStatus","methods","this","url","order","axios","post","then","response","success","emitter","emit","$httpToastMessage","$router","push","orderId","catch","error","created","on","mounted","ummounted","off","computed","attrs","every","render"],"mappings":"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","file":"js/chunk-2d217357.c86fce15.js","sourcesContent":["<template>\n  <loading :active=\"isLoading\"></loading>\n  <div class=\"mt-3\">\n    <h3 class=\"mt-6 mb-4 mx-lg-6 mx-md-0 px-3 border-start border-5 border-chocolate\">填寫資料</h3>\n    <div class=\"row px-lg-6 px-md-0\">\n      <div class=\"col-md-7\">\n        <Form ref=\"form\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n          <p class=\"\">請輸入聯絡資訊：</p>\n          <div class=\"mb-0\">\n            <label for=\"email\" class=\"text-muted mb-0\"\n              >信箱<span class=\"text-danger\"> *</span></label\n            >\n            <Field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control fw-light\"\n              :class=\"{ 'is-invalid': errors['email'], 'is-valid': form.user.email }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></Field>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <p class=\"mt-md-5 mt-4\">請輸入寄送資訊：</p>\n          <div class=\"mb-2\">\n            <label for=\"name\" class=\"text-muted mb-0\"\n              >姓名<span class=\"text-danger\"> *</span></label\n            >\n            <Field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control fw-light\"\n              :class=\"{ 'is-invalid': errors['姓名'], 'is-valid': form.user.name }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></Field>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-2\">\n            <label for=\"tel\" class=\"text-muted mb-0\"\n              >連絡電話<span class=\"text-danger\"> *</span></label\n            >\n            <Field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"tel\"\n              class=\"form-control fw-light\"\n              :class=\"{ 'is-invalid': errors['電話'], 'is-valid': form.user.tel }\"\n              placeholder=\"請輸入電話\"\n              rules=\"required|min:8|max:10\"\n              v-model=\"form.user.tel\"\n            ></Field>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-2\">\n            <label for=\"address\" class=\"text-muted mb-0\"\n              >連絡地址<span class=\"text-danger\"> *</span></label\n            >\n            <Field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control fw-light\"\n              :class=\"{ 'is-invalid': errors['地址'], 'is-valid': form.user.address }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></Field>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-2\">\n            <label for=\"ContactMessage\" class=\"text-muted mb-0\">意見回覆</label>\n            <textarea\n              class=\"form-control fw-light\"\n              rows=\"6\"\n              id=\"ContactMessage\"\n              placeholder=\"message ... \"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n\n          <div class=\"d-block d-md-none border p-4 mb-4 mt-md-0 mt-5\">\n            <h4 class=\" mb-4\">我的訂單</h4>\n            <div class=\"d-flex mb-2\" v-for=\"item in carts.carts\" :key=\"item.id\">\n              <router-link :to=\"`/detail/${item.product.id}`\"\n                ><img\n                  :src=\"item.product.imageUrl\"\n                  :alt=\"item.product.title\"\n                  class=\"me-2\"\n                  style=\"width: 48px; height: 48px; object-fit: cover\"\n              /></router-link>\n              <div class=\"w-100\">\n                <div class=\"d-flex justify-content-between\">\n                  <router-link :to=\"`/detail/${item.product.id}`\">\n                    <p class=\"mb-0 fw-bold\">{{ item.product.title }}</p>\n                  </router-link>\n                  <p class=\"mb-0\">NT${{ $filter.currency(item.product.price) }}</p>\n                </div>\n                <p class=\"mb-0 fw-normal\">x{{ item.qty + item.product.unit }}</p>\n              </div>\n            </div>\n            <table class=\"table text-muted border-top border-bottom mt-4\">\n              <tbody>\n                <tr>\n                  <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">原價</th>\n                  <td class=\"text-end border-0 px-0 pt-4\">\n                    NT${{ $filter.currency(carts.total) }}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\n                  <td class=\"text-end border-0 px-0 pt-0 pb-4\">ApplePay</td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"d-flex justify-content-between mt-4\">\n              <p class=\"mb-0 h4 fw-bold\">總計</p>\n              <p class=\"mb-0 h4 fw-bold\">NT${{ $filter.currency(carts.final_total) }}</p>\n            </div>\n          </div>\n          <div class=\"d-flex mt-4 justify-content-between align-items-end\">\n            <a href=\"#/cart\" class=\"text-dark mt-md-0 mt-3 align-self-center\"\n              ><font-awesome-icon\n                icon=\"chevron-left\"\n                class=\"fas fa-chevron-left me-2\"\n              ></font-awesome-icon>\n              回到上一步</a\n            >\n            <button\n              type=\"submit\"\n              class=\"btn btn-chocolight py-2 px-5\"\n              :disabled=\"Object.keys(errors).length || !checkData\"\n            >\n              送出訂單\n            </button>\n          </div>\n        </Form>\n      </div>\n      <div class=\"d-none d-md-block col-md-5\">\n        <div class=\"border p-4 mb-4 mt-md-0 mt-5\">\n          <h4 class=\" mb-4\">我的訂單</h4>\n          <div class=\"d-flex mb-2\" v-for=\"item in carts.carts\" :key=\"item.id\">\n            <router-link :to=\"`/detail/${item.product.id}`\"\n              ><img\n                :src=\"item.product.imageUrl\"\n                :alt=\"item.product.title\"\n                class=\"me-2\"\n                style=\"width: 48px; height: 48px; object-fit: cover\"\n              />\n            </router-link>\n            <div class=\"w-100\">\n              <div class=\"d-flex flex-wrap justify-content-between\">\n                <router-link :to=\"`/detail/${item.product.id}`\">\n                  <p class=\"mb-0 fw-bold\">{{ item.product.title }}</p>\n                </router-link>\n                <p class=\"mb-0\">NT${{ $filter.currency(item.product.price) }}</p>\n              </div>\n              <p class=\"mb-0 fw-normal\">x{{ item.qty + item.product.unit }}</p>\n            </div>\n          </div>\n          <table class=\"table text-muted border-top border-bottom mt-4\">\n            <tbody>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">原價</th>\n                <td class=\"text-end border-0 px-0 pt-4\">NT${{ $filter.currency(carts.total) }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\n                <td class=\"text-end border-0 px-0 pt-0 pb-4\">ApplePay</td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"d-flex justify-content-between mt-4\">\n            <p class=\"mb-0 h4 fw-bold\">總計</p>\n            <p class=\"mb-0 h4 fw-bold\">NT${{ $filter.currency(carts.final_total) }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Loading from '@/components/Loading.vue';\n\nexport default {\n  components: { Loading },\n  data() {\n    return {\n      apiUrl: process.env.VUE_APP_API,\n      apiPath: process.env.VUE_APP_PATH,\n      carts: {},\n      qty: 1,\n      loadingStatus: '',\n      isLoading: false,\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  methods: {\n    createOrder() {\n      this.isLoading = true;\n      const url = `${this.apiUrl}/api/${this.apiPath}/order`;\n      const order = this.form;\n      this.axios\n        .post(url, { data: order })\n        .then((response) => {\n          if (response.data.success) {\n            this.emitter.emit('navGetCart');\n            this.$httpToastMessage(response, '訂單送出');\n            this.$router.push(`/cart/order/${response.data.orderId}`);\n          } else {\n            this.$httpToastMessage(response, response.data.message);\n          }\n          this.isLoading = false;\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.$httpToastMessage(0, error);\n        });\n    },\n  },\n  created() {\n    // 側邊欄與本頁傳遞資料用\n    this.emitter.on('cartBus', (carts) => {\n      if (carts) {\n        this.carts = carts;\n      }\n    });\n  },\n  mounted() {\n    this.emitter.emit('navSendData');\n    this.emitter.emit('toProgress', 50);\n  },\n  ummounted() {\n    this.emitter.off('cartBus');\n  },\n  computed: {\n    checkData() {\n      const attrs = ['name', 'email', 'tel', 'address'];\n      return attrs.every((item) => this.form.user[item] !== '');\n    },\n  },\n};\n</script>\n","import { render } from \"./Profile.vue?vue&type=template&id=b537b4cc\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}