(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a9cfffd"],{"29e4":function(e,t,o){"use strict";var c=o("7a23"),a={"aria-label":"Page navigation example"},r={class:"pagination"},n=Object(c["createVNode"])("span",{"aria-hidden":"true"},"«",-1),l=Object(c["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function i(e,t,o,i,d,s){return Object(c["openBlock"])(),Object(c["createBlock"])("nav",a,[Object(c["createVNode"])("ul",r,[Object(c["createVNode"])("li",{class:["page-item",{disabled:1==o.pages.current_page}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return s.emitPage(o.pages.current_page-1)}),["prevent"]))},[n])],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.pages.total_pages,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",{active:e==o.pages.current_page}],key:t},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(t){return s.emitPage(e)}),["prevent"])},Object(c["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(c["createVNode"])("li",{class:["page-item",{disabled:o.pages.current_page==o.pages.total_pages}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return s.emitPage(o.pages.current_page+1)}),["prevent"]))},[l])],2)])])}var d={props:["pages"],methods:{emitPage:function(e){this.$emit("emit-page",e)}}};d.render=i;t["a"]=d},"6c87":function(e,t,o){"use strict";var c=o("7a23"),a={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},n={class:"modal-content border-0"},l=Object(c["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["createVNode"])("span",null,"刪除產品")]),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},d=Object(c["createTextVNode"])(" 是否刪除 "),s={key:0,class:"text-danger"},u={key:1,class:"text-danger"},p=Object(c["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),b={class:"modal-footer"},m=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function g(e,t,o,g,h,O){return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("div",n,[l,Object(c["createVNode"])("div",i,[d,h.order?(Object(c["openBlock"])(),Object(c["createBlock"])("strong",u,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(h.product.products,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("span",{key:t},Object(c["toDisplayString"])(e.product.title)+"、 ",1)})),128))])):(Object(c["openBlock"])(),Object(c["createBlock"])("strong",s,Object(c["toDisplayString"])(h.product.title),1)),p]),Object(c["createVNode"])("div",b,[m,Object(c["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(t){return e.$emit("delItem")})}," 確認刪除 ")])])])],512)}var h=o("7c2b"),O=o.n(h),j={data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",modal:"",product:{},order:!1}},methods:{openModal:function(e,t){this.order=t,this.product=e,this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new O.a(this.$refs.delProductModal)}};j.render=g;t["a"]=j},"857a":function(e,t,o){var c=o("1d80"),a=/"/g;e.exports=function(e,t,o,r){var n=String(c(e)),l="<"+t;return""!==o&&(l+=" "+o+'="'+String(r).replace(a,"&quot;")+'"'),l+">"+n+"</"+t+">"}},9911:function(e,t,o){"use strict";var c=o("23e7"),a=o("857a"),r=o("af03");c({target:"String",proto:!0,forced:r("link")},{link:function(e){return a(this,"a","href",e)}})},af03:function(e,t,o){var c=o("d039");e.exports=function(e){return c((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},d416:function(e,t,o){"use strict";o.r(t);var c=o("7a23"),a={class:"container"},r={class:"text-end mt-4"},n={class:"table shadow mt-4 bg-light"},l=Object(c["createVNode"])("thead",{class:"table mt-4 bg-info"},[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{width:"120"}," 分類 "),Object(c["createVNode"])("th",null,"產品名稱"),Object(c["createVNode"])("th",{width:"120",class:"text-end pe-5"}," 原價 "),Object(c["createVNode"])("th",{width:"120",class:"text-end pe-5"}," 售價 "),Object(c["createVNode"])("th",{width:"100"}," 是否啟用 "),Object(c["createVNode"])("th",{width:"120"}," 編輯 ")])],-1),i={class:"text-end pe-5"},d={class:"text-end pe-5"},s={key:0,class:"text-success"},u={key:1},p={class:"btn-group"},b={class:"d-flex justify-content-center"};function m(e,t,o,m,g,h){var O=Object(c["resolveComponent"])("pagination"),j=Object(c["resolveComponent"])("product-modal"),f=Object(c["resolveComponent"])("del-product-modal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",a,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return h.openModal("newItem")})}," 建立新的產品 ")]),Object(c["createVNode"])("table",n,[l,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(g.products,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.category),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("td",i,Object(c["toDisplayString"])(e.origin_price),1),Object(c["createVNode"])("td",d,Object(c["toDisplayString"])(e.price),1),Object(c["createVNode"])("td",null,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createBlock"])("span",s,"啟用")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",u,"未啟用"))]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return h.openModal("editItem",e)}}," 編輯 ",8,["onClick"]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return h.openModal("delItem",e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(c["createVNode"])("div",b,[Object(c["createVNode"])(O,{pages:g.pagination,onEmitPage:h.getData},null,8,["pages","onEmitPage"])])]),Object(c["createVNode"])(j,{pagination:g.pagination,ref:"productModal",onUpdate:h.getData},null,8,["pagination","onUpdate"]),Object(c["createVNode"])(f,{ref:"delProductModal",onEmitItem:h.delItem},null,8,["onEmitItem"])],64)}o("ac1f"),o("5319"),o("99af");var g=o("29e4"),h=o("6c87"),O=(o("a4d3"),o("e01a"),{id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),j={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl"},f={class:"modal-content border-0"},V={class:"modal-header bg-dark text-white"},v={id:"productModalLabel",class:"modal-title"},N=Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),k={class:"modal-body"},y={class:"row"},U={class:"col-sm-4"},w={class:"form-group"},x=Object(c["createVNode"])("label",{for:"imageUrl"},"主要圖片",-1),B=Object(c["createVNode"])("div",{class:"mb-1"},"多圖新增",-1),M={key:0},I={class:"form-group"},C=Object(c["createVNode"])("label",{for:"imagesUrl"},"輸入圖片網址",-1),P={key:0},D={key:1},S={key:1},_={class:"col-sm-8"},$={class:"form-group"},T=Object(c["createVNode"])("label",{for:"title"},"標題",-1),L={class:"row"},F={class:"form-group col-md-6"},E=Object(c["createVNode"])("label",{for:"category"},"分類",-1),z={class:"form-group col-md-6"},A=Object(c["createVNode"])("label",{for:"unit"},"單位",-1),J={class:"row"},q={class:"form-group col-md-6"},G=Object(c["createVNode"])("label",{for:"origin_price"},"原價",-1),H={class:"form-group col-md-6"},K=Object(c["createVNode"])("label",{for:"price"},"售價",-1),Q=Object(c["createVNode"])("hr",null,null,-1),R={class:"form-group"},W=Object(c["createVNode"])("label",{for:"description"},"產品描述",-1),X={class:"form-group"},Y=Object(c["createVNode"])("label",{for:"content"},"說明內容",-1),Z={class:"form-group"},ee={class:"form-check"},te=Object(c["createVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),oe={class:"modal-footer"},ce=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ae(e,t,o,a,r,n){return Object(c["openBlock"])(),Object(c["createBlock"])("div",O,[Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",f,[Object(c["createVNode"])("div",V,[Object(c["createVNode"])("h5",v,[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(r.title),1)]),N]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",y,[Object(c["createVNode"])("div",U,[Object(c["createVNode"])("div",w,[x,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"imageUrl","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.products.imageUrl=e}),type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,512),[[c["vModelText"],r.products.imageUrl]]),r.products.imageUrl?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("input",{key:0,type:"file",class:"form-control",placeholder:"請輸入圖片連結",ref:"file",onChange:t[2]||(t[2]=function(){return n.tempImg&&n.tempImg.apply(n,arguments)})},null,544)),Object(c["createVNode"])("img",{class:"img-fluid",src:r.products.imageUrl},null,8,["src"])]),B,r.products.imagesUrl?(Object(c["openBlock"])(),Object(c["createBlock"])("div",M,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(r.products.imagesUrl,(function(e,o){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"mb-1",key:o},[Object(c["createVNode"])("div",I,[C,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(e){return r.products.imagesUrl[o]=e}},null,8,["onUpdate:modelValue"]),[[c["vModelText"],r.products.imagesUrl[o]]]),r.products.imagesUrl[o]?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("input",{key:0,type:"file",class:"form-control",ref:"file",onChange:t[3]||(t[3]=function(){return n.tempImg&&n.tempImg.apply(n,arguments)})},null,544)),Object(c["createVNode"])("img",{class:"img-fluid",src:e,alt:""},null,8,["src"])])])})),128)),!r.products.imagesUrl.length||r.products.imagesUrl[r.products.imagesUrl.length-1]?(Object(c["openBlock"])(),Object(c["createBlock"])("div",P,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[4]||(t[4]=function(){return n.addImg&&n.addImg.apply(n,arguments)})}," 新增圖片(in多圖) ")])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",D,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[5]||(t[5]=function(){return n.uploadImg&&n.uploadImg.apply(n,arguments)})}," 上傳圖片(in多圖) "),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[6]||(t[6]=function(){return n.multiple&&n.multiple.apply(n,arguments)})}," 自動產生圖片(in多圖) "),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[7]||(t[7]=function(e){return r.products.imagesUrl.pop()})}," 刪除圖片 ")]))])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",S,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[8]||(t[8]=function(e){return n.uploadImg("main")})}," 上傳圖片(in主要圖片) "),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[9]||(t[9]=function(){return n.autoImg&&n.autoImg.apply(n,arguments)})}," 自動產生圖片(in主要圖片) "),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[10]||(t[10]=function(){return n.addImg&&n.addImg.apply(n,arguments)})}," 新增圖片(in主要圖片) ")]))]),Object(c["createVNode"])("div",_,[Object(c["createVNode"])("div",$,[T,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[11]||(t[11]=function(e){return r.products.title=e})},null,512),[[c["vModelText"],r.products.title]])]),Object(c["createVNode"])("div",L,[Object(c["createVNode"])("div",F,[E,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[12]||(t[12]=function(e){return r.products.category=e})},null,512),[[c["vModelText"],r.products.category]])]),Object(c["createVNode"])("div",z,[A,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[13]||(t[13]=function(e){return r.products.unit=e})},null,512),[[c["vModelText"],r.products.unit]])])]),Object(c["createVNode"])("div",J,[Object(c["createVNode"])("div",q,[G,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[14]||(t[14]=function(e){return r.products.origin_price=e})},null,512),[[c["vModelText"],r.products.origin_price,void 0,{number:!0}]])]),Object(c["createVNode"])("div",H,[K,Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[15]||(t[15]=function(e){return r.products.price=e})},null,512),[[c["vModelText"],r.products.price,void 0,{number:!0}]])])]),Q,Object(c["createVNode"])("div",R,[W,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[16]||(t[16]=function(e){return r.products.description=e})},"\n                ",512),[[c["vModelText"],r.products.description]])]),Object(c["createVNode"])("div",X,[Y,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[17]||(t[17]=function(e){return r.products.content=e})},"\n                ",512),[[c["vModelText"],r.products.content]])]),Object(c["createVNode"])("div",Z,[Object(c["createVNode"])("div",ee,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[18]||(t[18]=function(e){return r.products.is_enabled=e})},null,512),[[c["vModelCheckbox"],r.products.is_enabled]]),te])])])])]),Object(c["createVNode"])("div",oe,[ce,Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[19]||(t[19]=function(){return n.addItem&&n.addItem.apply(n,arguments)})}," 確認 ")])])])],512)}o("9911");var re=o("7c2b"),ne=o.n(re),le={props:["pagination"],data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",temp:{},modal:"",products:{imageUrl:"",imagesUrl:[],uploadImg:[]},title:"",isNew:!1}},methods:{addItem:function(){var e=this,t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/product"),o="post";this.isNew||(t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/product/").concat(this.products.id),o="put"),this.axios[o](t,{data:this.products}).then((function(t){t.data.success?(alert(t.data.message),e.$emit("update",e.pagination.current_page),e.hideModal()):(console.log(t.data.message),alert(t.data.message))})).catch((function(e){return console.log(e)}))},addImg:function(){this.products.imagesUrl?this.products.imagesUrl.push(""):this.products.imagesUrl=[""]},autoImg:function(){this.products.imageUrl="https://picsum.photos/400",this.products.imagesUrl.push("")},multiple:function(){var e=this.products.imagesUrl.length-1;""===this.products.imagesUrl[e]?(this.products.imagesUrl[e]="https://picsum.photos/40".concat(this.products.imagesUrl.length),this.products.imagesUrl.push("")):this.products.imagesUrl.push("https://picsum.photos/40".concat(this.products.imagesUrl.length))},tempImg:function(e){var t=e.target.files[0].temp;this.temp=t},clearFile:function(){this.$refs.file.value=null},uploadImg:function(){var e=this,t="";this.axios({method:"POST",url:"https://api.imgur.com/3/image",data:this.temp,headers:{Authorization:"Client-ID d442039f04fbe67"},mimeType:"multipart/form-data"}).then((function(o){o.data.success?("main"===t?(e.products.imageUrl=o.data.data.link,e.products.imagesUrl.push("")):(t=e.products.imagesUrl.length-1,e.products.imagesUrl[t]=o.data.data.link,e.products.imagesUrl.push("")),alert("上傳圖片成功"),e.temp={}):alert(o.data.data.error)})).catch((function(e){alert(e.data.data.error)}))},openModal:function(e,t){"newItem"===e?(this.products={imagesUrl:[]},this.title=t,this.isNew=!0):(this.products=e,this.title=t,this.isNew=!1),this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new ne.a(this.$refs.productModal)}};le.render=ae;var ie=le,de={data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",isNew:!1,title:"",products:[],tempProduct:{imagesUrl:[]},pagination:{}}},components:{pagination:g["a"],productModal:ie,delProductModal:h["a"]},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization="".concat(o),this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/products?page=").concat(t)).then((function(t){t.data.success?(e.products=t.data.products,e.pagination=t.data.pagination):console.log(t.data)})).catch((function(e){return console.log(e)}))},openModal:function(e,t){if("newItem"===e){var o="新增產品";this.$refs.productModal.openModal(e,o)}else if("editItem"===e){var c="編輯產品";this.$refs.productModal.openModal(t,c)}else this.$refs.delProductModal.openModal(t),this.tempProduct=t},delItem:function(){var e=this;this.axios.delete("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/product/").concat(this.tempProduct.id)).then((function(t){t.data.success?(alert(t.data.message),e.getData()):(console.log(t.data.message),alert(t.data.message)),e.$refs.delProductModal.hideModal()})).catch((function(e){return console.log(e)}))}},mounted:function(){this.getData()}};de.render=m;t["default"]=de},e01a:function(e,t,o){"use strict";var c=o("23e7"),a=o("83ab"),r=o("da84"),n=o("5135"),l=o("861d"),i=o("9bf2").f,d=o("e893"),s=r.Symbol;if(a&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(u[t]=!0),t};d(p,s);var b=p.prototype=s.prototype;b.constructor=p;var m=b.toString,g="Symbol(test)"==String(s("test")),h=/^Symbol\((.*)\)[^)]+$/;i(b,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(n(u,e))return"";var o=g?t.slice(7,-1):t.replace(h,"$1");return""===o?void 0:o}}),c({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-5a9cfffd.f0e85bcd.js.map