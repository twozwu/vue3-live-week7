(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-420b270a"],{"3d5d":function(e,t,a){"use strict";a("7deb")},"7deb":function(e,t,a){},b0c0:function(e,t,a){var c=a("83ab"),o=a("9bf2").f,r=Function.prototype,s=r.toString,l=/^\s*function ([^ (]*)/,n="name";c&&!(n in r)&&o(r,n,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},b789:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-30c33072");Object(c["pushScopeId"])("data-v-30c33072");var r={ref:"cart",class:"container"},s={class:"mt-3"},l=Object(c["createVNode"])("h3",{class:"mt-6 mb-4 px-3 border-start border-5 border-chocolate"},"商品列表",-1),n={class:"row"},d={class:"col-md"},i={class:"table"},b=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",{class:"text-light bg-chocolate"},[Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-s"},"品項"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"數量"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"價格"),Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-e"})])],-1),u={class:"border-bottom border-top"},p=Object(c["createVNode"])("th",{scope:"row",class:"border-0 px-0 font-weight-normal py-4 px-2"},[Object(c["createVNode"])("img",{src:"https://images.unsplash.com/photo-1502743780242-f10d2ce370f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1916&q=80",alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}}),Object(c["createVNode"])("p",{class:"mb-0 fw-bold ms-3 d-inline-block"},"Lorem ipsum")],-1),m={class:"border-0 align-middle",style:{"max-width":"100px"}},j={class:"input-group pe-5"},O={class:"input-group-prepend"},V={class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon1"},h=Object(c["createVNode"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:"1"},null,-1),f={class:"input-group-append"},N={class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon2"},g=Object(c["createVNode"])("td",{class:"border-0 align-middle"},[Object(c["createVNode"])("p",{class:"mb-0 ms-auto"},"NT$12,000")],-1),v={class:"border-0 align-middle"},y={class:"bg-custom"},x={scope:"row",class:"row g-0 border-0 font-weight-normal py-4"},k=Object(c["createVNode"])("div",{class:"col-11"},[Object(c["createVNode"])("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0\n                      border-start-0 border-end-0 bg-custom",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2"})],-1),w={class:"col-1 input-group-append"},C={class:"btn btn-outline-dark border-bottom border-top-0\n                border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2"},S=Object(c["createVNode"])("td",{class:"border-0 align-middle text-end fw-bold",style:{"max-width":"160px"}}," 總額： ",-1),B=Object(c["createVNode"])("td",{class:"border-0 align-middle"},null,-1),q={class:"border-0 align-middle"},U=Object(c["createVNode"])("div",{class:"input-group w-50 mb-3"},null,-1),D=Object(c["createVNode"])("div",{class:"row justify-content-end"},[Object(c["createVNode"])("button",{class:"col-1 m-5 btn btn-chocolight"},"下一步")],-1),L={class:"text-end mt-5"},P=Object(c["createTextVNode"])("清空購物車 "),T={class:"table align-middle"},I=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th"),Object(c["createVNode"])("th",null,"品名"),Object(c["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["createVNode"])("th",{class:"text-end"},"單價")])],-1),_=Object(c["createTextVNode"])(" x "),E={key:0,class:"text-success"},F={class:"input-group input-group-sm"},M={class:"input-group mb-3"},J={class:"input-group-text",id:"basic-addon2"},$={class:"text-end"},G={class:"text-success"},H={key:0},Q=Object(c["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),R={class:"text-end"},W=Object(c["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),z={class:"text-end text-success"},A={key:0,class:"text-center"},K=Object(c["createVNode"])("p",null,"購物車為空",-1),X={class:"my-5 row justify-content-center"},Y={class:"mb-3"},Z=Object(c["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),ee={class:"mb-3"},te=Object(c["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),ae={class:"mb-3"},ce=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),oe={class:"mb-3"},re=Object(c["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),se={class:"mb-3"},le=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),ne={class:"text-end"},de=Object(c["createTextVNode"])("送出訂單 ");Object(c["popScopeId"])();var ie=o((function(e,t,a,ie,be,ue){var pe=Object(c["resolveComponent"])("Progress"),me=Object(c["resolveComponent"])("font-awesome-icon"),je=Object(c["resolveComponent"])("Field"),Oe=Object(c["resolveComponent"])("ErrorMessage"),Ve=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])(pe),Object(c["createVNode"])("div",s,[l,Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("table",i,[b,Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",u,[p,Object(c["createVNode"])("td",m,[Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",O,[Object(c["createVNode"])("button",V,[Object(c["createVNode"])(me,{icon:"minus",class:"fas fa-minus"})])]),h,Object(c["createVNode"])("div",f,[Object(c["createVNode"])("button",N,[Object(c["createVNode"])(me,{icon:"plus",class:"fas fa-plus"})])])])]),g,Object(c["createVNode"])("td",v,[Object(c["createVNode"])(me,{icon:"times",class:"fas fa-times"})])]),Object(c["createVNode"])("tr",y,[Object(c["createVNode"])("th",x,[k,Object(c["createVNode"])("div",w,[Object(c["createVNode"])("button",C,[Object(c["createVNode"])(me,{icon:"paper-plane",class:"fas fa-paper-plane"})])])]),S,B,Object(c["createVNode"])("td",q,[Object(c["createVNode"])(me,{icon:"times",class:"fas fa-times text-chocolate"})])])])]),U,D])])]),Object(c["createVNode"])("div",L,[Object(c["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(){return ue.clearCart&&ue.clearCart.apply(ue,arguments)}),disabled:!be.cartsLength,style:{color:"chocolate"}},["clear"==be.loadingStatus?(Object(c["openBlock"])(),Object(c["createBlock"])(me,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),P],8,["disabled"])]),Object(c["createVNode"])("table",T,[I,Object(c["createVNode"])("tbody",null,[0!=be.carts.carts?(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(be.carts.carts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return ue.delItem(e.id)}},[be.loadingStatus==e.id?(Object(c["openBlock"])(),Object(c["createBlock"])(me,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),_],8,["onClick"])]),Object(c["createVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.product.title)+" ",1),e.coupon?(Object(c["openBlock"])(),Object(c["createBlock"])("div",E," 已套用優惠券 ")):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",F,[Object(c["createVNode"])("div",M,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{ref:"qty",min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},disabled:be.loadingStatus==e.id,onChange:function(t){return ue.updateCart(e)}},null,40,["onUpdate:modelValue","disabled","onChange"]),[[c["vModelText"],e.qty,void 0,{number:!0}]]),Object(c["createVNode"])("span",J,Object(c["toDisplayString"])(e.product.unit),1)])])]),Object(c["createVNode"])("td",$,[Object(c["createVNode"])("small",G,"折扣價："+Object(c["toDisplayString"])(e.product.price),1)])])})),128)):Object(c["createCommentVNode"])("",!0)]),0!=be.carts.total?(Object(c["openBlock"])(),Object(c["createBlock"])("tfoot",H,[Object(c["createVNode"])("tr",null,[Q,Object(c["createVNode"])("td",R,Object(c["toDisplayString"])(be.carts.total),1)]),Object(c["createVNode"])("tr",null,[W,Object(c["createVNode"])("td",z,Object(c["toDisplayString"])(be.carts.final_total),1)])])):Object(c["createCommentVNode"])("",!0)]),0==be.carts.total?(Object(c["openBlock"])(),Object(c["createBlock"])("div",A,[K])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",X,[Object(c["createVNode"])(Ve,{ref:"form",class:"col-md-6",onSubmit:ue.createOrder},{default:o((function(e){var a=e.errors;return[Object(c["createVNode"])("div",Y,[Z,Object(c["createVNode"])(je,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:be.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return be.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(Oe,{name:"email",class:"invalid-feedback"})]),Object(c["createVNode"])("div",ee,[te,Object(c["createVNode"])(je,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:be.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return be.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(Oe,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",ae,[ce,Object(c["createVNode"])(je,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:be.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return be.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(Oe,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",oe,[re,Object(c["createVNode"])(je,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:be.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return be.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(Oe,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",se,[le,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return be.form.message=e})},null,512),[[c["vModelText"],be.form.message]])]),Object(c["createVNode"])("div",ne,[Object(c["createVNode"])("button",{type:"submit",class:"btn btn-danger",disabled:!be.cartsLength},["submit"==be.loadingStatus?(Object(c["openBlock"])(),Object(c["createBlock"])(me,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),de],8,["disabled"])])]})),_:1},8,["onSubmit"])])],512)})),be=(a("99af"),{class:"position-relative mx-6"}),ue=Object(c["createVNode"])("div",{class:"progress my-6",style:{height:"1px"}},[Object(c["createVNode"])("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})],-1),pe=Object(c["createStaticVNode"])('<button type="button" class="position-absolute top-0 start-0 translate-middle\n        btn btn-sm btn-chocolate rounded-pill" style="width:2rem;height:2rem;"> 1 </button><span class="rounded-pill text-dark\n          position-absolute start-0 translate-middle" style="bottom:-60px;">確認商品</span><button type="button" class="position-absolute top-0 start-50 translate-middle\n        btn btn-sm btn-secondary rounded-pill" style="width:2rem;height:2rem;"> 2 </button><span class="rounded-pill text-dark\n          position-absolute start-50 translate-middle" style="bottom:-60px;">填寫資料</span><button type="button" class="position-absolute top-0 start-100 translate-middle\n        btn btn-sm btn-secondary rounded-pill" style="width:2rem;height:2rem;"> 3 </button><span class="rounded-pill text-dark\n          position-absolute start-100 translate-middle w-25" style="bottom:-60px;max-width:64px;">送出訂單</span>',6);function me(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("div",be,[ue,pe])}const je={};je.render=me;var Oe=je,Ve={components:{Progress:Oe},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",carts:{},qty:1,loadingStatus:"",cartsLength:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){this.emitter.emit("navGetCart")},updateCart:function(e){var t=this;if(e.qty<=1)return alert("商品數量最少為一件!"),void(this.$refs.qty.value=1);this.loadingStatus=e.id;var a={product_id:e.product_id,qty:e.qty},c="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(e.id);this.axios.put(c,{data:a}).then((function(e){e.data.success?(alert(e.data.message),t.loadingStatus="",t.getCart()):(alert(e.data.message),t.loadingStatus="")})).catch((function(e){return console.log(e)}))},clearCart:function(){var e=this;this.loadingStatus="clear";var t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/carts");this.axios.delete(t).then((function(t){t.data.success?(alert(t.data.message),e.getCart(),e.loadingStatus=""):(alert(t.data.message),e.loadingStatus="")})).catch((function(e){return console.log(e)}))},delItem:function(e){var t=this;this.loadingStatus=e;var a="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(e);this.axios.delete(a).then((function(e){e.data.success?(alert(e.data.message),t.loadingStatus="",t.getCart()):(alert(e.data.message),t.loadingStatus="")})).catch((function(e){return console.log(e)}))},createOrder:function(){var e=this;if(this.loadingStatus="submit",this.cartsLength<=0)alert("購物車為空，請下單完再送出唷");else{var t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/order"),a=this.form;this.axios.post(t,{data:a}).then((function(t){t.data.success?(alert("".concat(t.data.message,"，謝謝惠顧。")),e.$refs.form.resetForm(),e.loadingStatus="",e.getCart()):alert(t.data.message)})).catch((function(e){return console.log(e)}))}}},created:function(){var e=this;this.emitter.on("cartsGetData",(function(t){t&&(e.carts=t,e.cartsLength=t.carts.length)}))},mounted:function(){this.getCart()}};a("3d5d");Ve.render=ie,Ve.__scopeId="data-v-30c33072";t["default"]=Ve}}]);
//# sourceMappingURL=chunk-420b270a.64a50746.js.map