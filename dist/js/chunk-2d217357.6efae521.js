(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217357"],{c66d:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("b64b");var a=c("7a23"),r={class:"mt-3"},o=Object(a["createVNode"])("h3",{class:"mt-6 mb-4 mx-lg-6 mx-md-0 px-3 border-start border-5 border-chocolate"},"填寫資料",-1),l={class:"row px-lg-6 px-md-0"},s={class:"col-md-7"},d=Object(a["createVNode"])("p",{class:""},"請輸入聯絡資訊：",-1),n={class:"mb-0"},i=Object(a["createVNode"])("label",{for:"ContactMail",class:"text-muted mb-0"},[Object(a["createTextVNode"])("信箱"),Object(a["createVNode"])("span",{class:"text-danger"}," *")],-1),b=Object(a["createVNode"])("p",{class:"mt-md-5 mt-4"},"請輸入寄送資訊：",-1),m={class:"mb-2"},u=Object(a["createVNode"])("label",{for:"ContactName",class:"text-muted mb-0"},[Object(a["createTextVNode"])("姓名"),Object(a["createVNode"])("span",{class:"text-danger"}," *")],-1),p={class:"mb-2"},j=Object(a["createVNode"])("label",{for:"ContactPhone",class:"text-muted mb-0"},[Object(a["createTextVNode"])("連絡電話"),Object(a["createVNode"])("span",{class:"text-danger"}," *")],-1),O={class:"mb-2"},f=Object(a["createVNode"])("label",{for:"ContactPhone",class:"text-muted mb-0"},[Object(a["createTextVNode"])("連絡地址"),Object(a["createVNode"])("span",{class:"text-danger"}," *")],-1),V={class:"mb-2"},N=Object(a["createVNode"])("label",{for:"ContactMessage",class:"text-muted mb-0"},"意見回覆",-1),h={class:"d-block d-md-none border p-4 mb-4 mt-md-0 mt-5"},x=Object(a["createVNode"])("h4",{class:" mb-4"},"我的訂單",-1),g={class:"w-100"},v={class:"d-flex justify-content-between"},w={class:"mb-0 fw-bold"},y={class:"mb-0"},k={class:"mb-0 fw-normal"},C={class:"table text-muted border-top border-bottom mt-4"},$=Object(a["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"原價",-1),T={class:"text-end border-0 px-0 pt-4"},D=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),Object(a["createVNode"])("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),S={class:"d-flex justify-content-between mt-4"},B=Object(a["createVNode"])("p",{class:"mb-0 h4 fw-bold"},"總計",-1),U={class:"mb-0 h4 fw-bold"},L={class:"d-flex mt-4 justify-content-between align-items-end"},M={href:"#/cart",class:"text-dark mt-md-0 mt-3 align-self-center"},q=Object(a["createTextVNode"])(" 回到上一步"),P={class:"d-none d-md-block col-md-5"},F={class:"border p-4 mb-4 mt-md-0 mt-5"},_=Object(a["createVNode"])("h4",{class:" mb-4"},"我的訂單",-1),A={class:"w-100"},E={class:"d-flex flex-wrap justify-content-between"},J={class:"mb-0 fw-bold"},G={class:"mb-0"},I={class:"mb-0 fw-normal"},z={class:"table text-muted border-top border-bottom mt-4"},H=Object(a["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"原價",-1),K={class:"text-end border-0 px-0 pt-4"},Q=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),Object(a["createVNode"])("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),R={class:"d-flex justify-content-between mt-4"},W=Object(a["createVNode"])("p",{class:"mb-0 h4 fw-bold"},"總計",-1),X={class:"mb-0 h4 fw-bold"};function Y(e,t,c,Y,Z,ee){var te=Object(a["resolveComponent"])("loading"),ce=Object(a["resolveComponent"])("Field"),ae=Object(a["resolveComponent"])("ErrorMessage"),re=Object(a["resolveComponent"])("router-link"),oe=Object(a["resolveComponent"])("font-awesome-icon"),le=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(te,{active:Z.isLoading},null,8,["active"]),Object(a["createVNode"])("div",r,[o,Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])(le,{ref:"form",onSubmit:ee.createOrder},{default:Object(a["withCtx"])((function(c){var r=c.errors;return[d,Object(a["createVNode"])("div",n,[i,Object(a["createVNode"])(ce,{id:"email",name:"email",type:"email",class:["form-control fw-light",{"is-invalid":r["email"],"is-valid":Z.form.user.email}],placeholder:"請輸入 Email",rules:"email|required",modelValue:Z.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Z.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"email",class:"invalid-feedback"})]),b,Object(a["createVNode"])("div",m,[u,Object(a["createVNode"])(ce,{id:"name",name:"姓名",type:"text",class:["form-control fw-light",{"is-invalid":r["姓名"],"is-valid":Z.form.user.name}],placeholder:"請輸入姓名",rules:"required",modelValue:Z.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Z.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",p,[j,Object(a["createVNode"])(ce,{id:"tel",name:"電話",type:"tel",class:["form-control fw-light",{"is-invalid":r["電話"],"is-valid":Z.form.user.tel}],placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:Z.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Z.form.user.tel=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",O,[f,Object(a["createVNode"])(ce,{id:"address",name:"地址",type:"text",class:["form-control fw-light",{"is-invalid":r["地址"],"is-valid":Z.form.user.address}],placeholder:"請輸入地址",rules:"required",modelValue:Z.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Z.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",V,[N,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control fw-light",rows:"6",id:"ContactMessage",placeholder:"message ... ","onUpdate:modelValue":t[5]||(t[5]=function(e){return Z.form.message=e})},null,512),[[a["vModelText"],Z.form.message]])]),Object(a["createVNode"])("div",h,[x,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Z.carts.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"d-flex mb-2",key:t.id},[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.product.title,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,["src","alt"]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])(re,{to:"/detail/".concat(t.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("p",w,Object(a["toDisplayString"])(t.product.title),1)]})),_:2},1032,["to"]),Object(a["createVNode"])("p",y,"NT$"+Object(a["toDisplayString"])(e.$filter.currency(t.product.price)),1)]),Object(a["createVNode"])("p",k,"x"+Object(a["toDisplayString"])(t.qty+t.product.unit),1)])])})),128)),Object(a["createVNode"])("table",C,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[$,Object(a["createVNode"])("td",T," NT$"+Object(a["toDisplayString"])(e.$filter.currency(Z.carts.total)),1)]),D])]),Object(a["createVNode"])("div",S,[B,Object(a["createVNode"])("p",U,"NT$"+Object(a["toDisplayString"])(e.$filter.currency(Z.carts.final_total)),1)])]),Object(a["createVNode"])("div",L,[Object(a["createVNode"])("a",M,[Object(a["createVNode"])(oe,{icon:"chevron-left",class:"fas fa-chevron-left me-2"}),q]),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-chocolight py-2 px-5",disabled:Object.keys(r).length||!ee.checkData}," 送出訂單 ",8,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(a["createVNode"])("div",P,[Object(a["createVNode"])("div",F,[_,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Z.carts.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"d-flex mb-2",key:t.id},[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.product.title,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,["src","alt"]),Object(a["createVNode"])("div",A,[Object(a["createVNode"])("div",E,[Object(a["createVNode"])(re,{to:"/detail/".concat(t.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("p",J,Object(a["toDisplayString"])(t.product.title),1)]})),_:2},1032,["to"]),Object(a["createVNode"])("p",G,"NT$"+Object(a["toDisplayString"])(e.$filter.currency(t.product.price)),1)]),Object(a["createVNode"])("p",I,"x"+Object(a["toDisplayString"])(t.qty+t.product.unit),1)])])})),128)),Object(a["createVNode"])("table",z,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[H,Object(a["createVNode"])("td",K,"NT$"+Object(a["toDisplayString"])(e.$filter.currency(Z.carts.total)),1)]),Q])]),Object(a["createVNode"])("div",R,[W,Object(a["createVNode"])("p",X,"NT$"+Object(a["toDisplayString"])(e.$filter.currency(Z.carts.final_total)),1)])])])])])],64)}c("99af");var Z=c("3a5e"),ee={components:{Loading:Z["a"]},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",carts:{},qty:1,loadingStatus:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{createOrder:function(){var e=this;this.isLoading=!0;var t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/order"),c=this.form;this.axios.post(t,{data:c}).then((function(t){t.data.success?(e.emitter.emit("navGetCart"),e.$httpToastMessage(t,"訂單送出"),e.$router.push("/cart/order/".concat(t.data.orderId))):e.$httpToastMessage(t,t.data.message),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpToastMessage(!1,t)}))}},created:function(){var e=this;this.emitter.on("cartBus",(function(t){t&&(e.carts=t)}))},mounted:function(){this.emitter.emit("navSendData"),this.emitter.emit("toProgress",50)},ummounted:function(){this.emitter.off("cartBus")},computed:{checkData:function(){var e=this,t=["name","email","tel","address"];return t.every((function(t){return""!==e.form.user[t]}))}}};ee.render=Y;t["default"]=ee}}]);
//# sourceMappingURL=chunk-2d217357.6efae521.js.map