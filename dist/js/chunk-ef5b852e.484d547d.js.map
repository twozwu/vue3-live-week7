{"version":3,"sources":["webpack:///./src/views/Detail.vue?003a","webpack:///./src/views/Detail.vue","webpack:///./src/views/Detail.vue?8ed3"],"names":["class","active","isLoading","src","product","imageUrl","alt","title","$filter","currency","origin_price","price","type","id","disabled","qty","icon","ref","aria-label","aria-describedby","loadingStatus","href","addCart","pulse","checkNum","content","description","products","column","shuffle","components","swiperProducts","Loading","data","apiUrl","apiPath","methods","getProduct","this","$route","params","axios","get","then","res","success","$httpToastMessage","catch","$refs","toast","showToast","cart","product_id","url","post","response","emitter","emit","message","error","console","log","getData","created","on","carts","watch","to","mounted","render","__scopeId"],"mappings":"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","file":"js/chunk-ef5b852e.484d547d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Detail.vue?vue&type=style&index=0&id=6ccbf886&lang=scss&scoped=true\"","<template>\n  <loading :active=\"isLoading\"></loading>\n  <div class=\"container\">\n    <div class=\"row align-items-center mt-5 pt-3\">\n      <div class=\"col-md-7\">\n        <img :src=\"product.imageUrl\" class=\"d-block w-100 img-size\" alt=\"...\" />\n      </div>\n      <div class=\"col-md-5\">\n        <nav aria-label=\"breadcrumb\">\n          <ol class=\"breadcrumb bg-white px-0 mb-0 py-3\">\n            <li class=\"breadcrumb-item\"><a class=\"text-muted\" href=\"#\">首頁</a></li>\n            <li class=\"breadcrumb-item\"><a class=\"text-muted\" href=\"#/products\">產品列表</a></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">詳細資料</li>\n          </ol>\n        </nav>\n        <h2 class=\"fw-bold h1 mb-1\">{{ product.title }}</h2>\n        <p class=\"mb-0 text-muted text-end\">\n          <del>NT${{ $filter.currency(product.origin_price) }}</del>\n        </p>\n        <p class=\"h4 fw-bold text-end\">NT${{ $filter.currency(product.price) }}</p>\n        <div class=\"row align-items-center\">\n          <div class=\"col-6\">\n            <div class=\"input-group my-3 bg-light rounded  border border-chocolight\">\n              <div class=\"input-group-prepend\">\n                <button\n                  class=\"btn btn-outline-chocolight border-0 py-2\"\n                  type=\"button\"\n                  id=\"button-addon1\"\n                  :disabled=\"qty <= 1\"\n                  @click=\"qty -= 1\"\n                >\n                  <font-awesome-icon icon=\"minus\" class=\"fas fa-minus\"></font-awesome-icon>\n                </button>\n              </div>\n              <input\n                type=\"text\"\n                class=\"form-control border-0 text-center my-auto shadow-none\"\n                ref=\"qty\"\n                aria-label=\"Example text with button addon\"\n                aria-describedby=\"button-addon1\"\n                :disabled=\"loadingStatus != ''\"\n                v-model.number=\"qty\"\n              />\n              <div class=\"input-group-append\">\n                <button\n                  class=\"btn btn-outline-chocolight border-0 py-2\"\n                  type=\"button\"\n                  id=\"button-addon2\"\n                  :disabled=\"loadingStatus != ''\"\n                  @click=\"qty += 1\"\n                >\n                  <font-awesome-icon icon=\"plus\" class=\"fas fa-plus\"></font-awesome-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <button\n              href=\"#\"\n              class=\"text-nowrap btn btn-chocolight w-100 py-2\"\n              @click.prevent=\"addCart\"\n              :disabled=\"loadingStatus == 'add'\"\n            >\n              <font-awesome-icon\n                icon=\"spinner\"\n                pulse\n                class=\"fas fa-spinner fa-pulse\"\n                v-if=\"loadingStatus == 'add'\"\n              ></font-awesome-icon\n              >加入購物車\n            </button>\n          </div>\n        </div>\n        <span class=\"text-danger\" v-if=\"checkNum\">數量不能小於0唷</span>\n      </div>\n    </div>\n    <div class=\"row mt-3 mb-5\">\n      <div class=\"col-md-4\">\n        <p class=\"h5\">\n          {{ product.content }}\n        </p>\n      </div>\n      <div class=\"col-md-3\">\n        <p class=\"text-muted\">{{ product.description }}</p>\n      </div>\n    </div>\n    <h3 class=\"fw-bold\">您可能也會有興趣 :</h3>\n    <swiper-products :products=\"products\" :column=\"4\"></swiper-products>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.img-size {\n  max-height: 500px;\n  height: 100%;\n  object-fit: cover;\n}\n</style>\n\n<script>\nimport swiperProducts from '@/components/SwiperProducts.vue';\nimport Loading from '@/components/Loading.vue';\n\nconst shuffle = require('lodash.shuffle');\n\nexport default {\n  components: { swiperProducts, Loading },\n  data() {\n    return {\n      apiUrl: process.env.VUE_APP_API,\n      apiPath: process.env.VUE_APP_PATH,\n      product: {},\n      products: {},\n      qty: 1,\n      loadingStatus: '',\n      isLoading: false,\n      checkNum: false,\n    };\n  },\n  methods: {\n    getProduct() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${this.$route.params.id}`;\n      this.isLoading = true;\n      this.axios\n        .get(apiUrl)\n        .then((res) => {\n          if (res.data.success) {\n            this.product = res.data.product;\n          } else {\n            this.$httpToastMessage(res, '取得商品');\n          }\n          this.isLoading = false;\n        })\n        .catch(() => {\n          this.$refs.toast.showToast('無法取得產品資料喔!', 'error');\n        });\n    },\n    addCart() {\n      this.loadingStatus = 'add';\n      const cart = {\n        product_id: this.$route.params.id,\n        qty: this.qty,\n      };\n      const url = `${this.apiUrl}/api/${this.apiPath}/cart`;\n      this.axios\n        .post(url, { data: cart })\n        .then((response) => {\n          if (response.data.success) {\n            this.emitter.emit('navGetCart');\n            this.$httpToastMessage(response, '加入購物車');\n          } else {\n            this.$httpToastMessage(response, response.data.message);\n          }\n          this.loadingStatus = '';\n        })\n        .catch((error) => console.log(error));\n    },\n    getData() {\n      this.isLoading = true;\n      this.axios\n        .get(`${this.apiUrl}/api/${this.apiPath}/products/all`)\n        .then((response) => {\n          if (response.data.success) {\n            this.products = shuffle(response.data.products);\n          } else {\n            this.$httpToastMessage(response, response.data.message);\n          }\n          this.isLoading = false;\n        })\n        .catch((error) => console.log(error));\n    },\n  },\n  created() {\n    this.emitter.on('cartBus', (carts) => {\n      if (carts) {\n        this.carts = carts;\n      }\n    });\n  },\n  watch: {\n    qty() {\n      if (this.qty < 1) {\n        this.qty = 1;\n        this.checkNum = true;\n      }\n    },\n    $route(to) {\n      if (this.product.id === to.params.id || to.params.id === 'products') {\n        return;\n      }\n      this.getProduct();\n    },\n  },\n  mounted() {\n    this.getProduct();\n    this.getData();\n  },\n};\n</script>\n","import { render } from \"./Detail.vue?vue&type=template&id=6ccbf886&scoped=true\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=6ccbf886&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6ccbf886\"\n\nexport default script"],"sourceRoot":""}