{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Order.vue","webpack:///./src/views/Order.vue?3d30"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","class","scope","colspan","href","disabled","order","id","is_paid","Date","toLocaleString","create_at","ref","type","value","copyOrderID","user","name","email","tel","address","message","icon","products","item","key","product","src","imageUrl","alt","title","style","$filter","currency","price","qty","unit","total","checkout","components","data","apiUrl","apiPath","loadingStatus","isLoading","form","methods","getOrder","$route","params","emitter","emit","axios","then","res","success","$httpToastMessage","catch","console","log","post","$router","push","document","execCommand","$refs","orderID","select","watch","mounted","render"],"mappings":"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","file":"js/chunk-582d0392.10ac80df.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <div class=\"mt-3\">\n    <h3 class=\"my-5 my-md-6 text-center\" v-if=\"order.id\">\n      感謝您的訂購，歡迎再度光臨！\n    </h3>\n    <h3 class=\"my-5 my-md-6 text-center\" v-else>\n      您好，查無您的訂單，請確認後重新輸入。\n    </h3>\n    <div class=\"row px-md-6\" v-if=\"order.id\">\n      <div class=\"col-md-7\">\n        <table class=\"table table-hover\">\n          <thead class=\"table-chocolate\">\n            <tr>\n              <th scope=\"col\" colspan=\"2\" class=\"text-center fw-light\" v-if=\"order.is_paid\">\n                以下是您的訂購資訊， 請確認後進行付款。\n              </th>\n              <th scope=\"col\" colspan=\"2\" class=\"text-center fw-light\" v-else>\n                以下是您的訂購資訊， 感謝您的訂購。\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th class=\"text-muted\">訂購時間</th>\n              <td>{{ new Date().toLocaleString(order.create_at) }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">訂購 ID</th>\n              <td>\n                <input ref=\"orderID\" type=\"text\" :value=\"order.id\" class=\"form-control mb-2\" />\n                <input\n                  type=\"button\"\n                  value=\"點我複製以便查詢\"\n                  @click.prevent=\"copyOrderID\"\n                  class=\"btn btn-outline-chocolight\"\n                />\n              </td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">訂購人</th>\n              <td>{{ order.user.name }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">聯絡信箱</th>\n              <td>{{ order.user.email }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">聯絡電話</th>\n              <td>{{ order.user.tel }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">地址</th>\n              <td>{{ order.user.address }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">您的備註</th>\n              <td>{{ order.message }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-muted\">付款狀態</th>\n              <td>{{ order.is_paid ? '已付款' : '尚未付款' }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"d-flex mt-4 justify-content-between align-items-end\">\n          <a href=\"#/products\" class=\"text-dark mt-md-0 mt-3 align-self-center\"\n            ><font-awesome-icon\n              icon=\"chevron-left\"\n              class=\"fas fa-chevron-left me-2\"\n            ></font-awesome-icon>\n            繼續購物</a\n          >\n        </div>\n      </div>\n      <div class=\"col-md-5\">\n        <div class=\"border p-4 mb-4\">\n          <h4 class=\" mb-4\">我的訂單</h4>\n          <div class=\"d-flex mb-2\" v-for=\"item in order.products\" :key=\"item.product.id\">\n            <img\n              :src=\"item.product.imageUrl\"\n              :alt=\"item.product.title\"\n              class=\"me-2\"\n              style=\"width: 48px; height: 48px; object-fit: cover\"\n            />\n            <div class=\"w-100\">\n              <div class=\"d-flex justify-content-between\">\n                <p class=\"mb-0 fw-bold\">{{ item.product.title }}</p>\n                <p class=\"mb-0\">NT${{ $filter.currency(item.product.price) }}</p>\n              </div>\n              <p class=\"mb-0 fw-normal\">x{{ item.qty + item.product.unit }}</p>\n            </div>\n          </div>\n          <table class=\"table text-muted border-top border-bottom mt-4\">\n            <tbody>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">原價</th>\n                <td class=\"text-end border-0 px-0 pt-4\">NT${{ $filter.currency(order.total) }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\n                <td class=\"text-end border-0 px-0 pt-0 pb-4\">ApplePay</td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"d-flex justify-content-between mt-4\">\n            <p class=\"mb-0 h4 fw-bold\">總計</p>\n            <p class=\"mb-0 h4 fw-bold\">NT${{ $filter.currency(order.total) }}</p>\n          </div>\n          <a\n            href=\"#/products\"\n            class=\"btn btn-chocolight w-100 mt-4\"\n            v-if=\"!order.is_paid\"\n            @click.prevent=\"checkout\"\n            >由此付款</a\n          >\n          <button class=\"btn btn-chocolight w-100 mt-4\" v-else disabled>訂單已完成</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped></style>\n\n<script>\nexport default {\n  components: {},\n  data() {\n    return {\n      apiUrl: process.env.VUE_APP_API,\n      apiPath: process.env.VUE_APP_PATH,\n      order: {\n        id: '',\n        user: {},\n        is_paid: false,\n      },\n      loadingStatus: '',\n      isLoading: false,\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  methods: {\n    getOrder() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${this.$route.params.id}`;\n      this.emitter.emit('isLoading', true);\n      this.axios\n        .get(apiUrl)\n        .then((res) => {\n          if (res.data.success && res.data.order) {\n            this.order = res.data.order;\n          } else {\n            // this.$httpToastMessage(res, res.data.message);\n            this.$httpToastMessage(false, '查無此訂單');\n          }\n          this.emitter.emit('isLoading', false);\n        })\n        .catch((error) => {\n          console.log(error);\n          this.$httpToastMessage(false, '無法取得資料喔～');\n        });\n    },\n    checkout() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${this.$route.params.id}`;\n      this.emitter.emit('isLoading', true);\n      this.axios\n        .post(apiUrl)\n        .then((res) => {\n          if (res.data.success) {\n            this.$httpToastMessage(res, res.data.message);\n            this.$router.push('/success');\n          } else {\n            this.$httpToastMessage(res, res.data.message);\n          }\n          this.emitter.emit('isLoading', false);\n        })\n        .catch((error) => {\n          console.log(error);\n          this.emitter.emit('isLoading', false);\n        });\n    },\n    copyOrderID() {\n      document.execCommand('Copy', false, this.$refs.orderID.select());\n    },\n  },\n  watch: {\n    $route() {\n      this.getOrder();\n    },\n  },\n  mounted() {\n    this.getOrder();\n    this.emitter.emit('toProgress', 100);\n  },\n};\n</script>\n","import { render } from \"./Order.vue?vue&type=template&id=6454b490\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}