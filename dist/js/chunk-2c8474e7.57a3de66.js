(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c8474e7"],{"3b3f":function(t,e,a){"use strict";a.r(e);var c=a("7a23"),o=Object(c["withScopeId"])("data-v-5140480a");Object(c["pushScopeId"])("data-v-5140480a");var s={key:0,class:"mt-3"},r=Object(c["createVNode"])("h3",{class:"mt-6 mb-4 px-3 border-start border-5 border-chocolate"},"商品列表",-1),n={class:"row"},i={class:"col-md table-responsive"},d={class:"table"},l=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",{class:"text-light bg-chocolate"},[Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-s"},"品項"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"數量"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"價格"),Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-e"})])],-1),p={scope:"row",class:"border-0 px-2 font-weight-normal py-4 w-title",style:{}},u={class:"mb-0 fw-bold ms-md-3 d-md-inline-block d-sm-block"},b={class:"border-0 align-middle w-qty px-0",style:{"max-width":"100px"}},h={class:"input-group pe-md-5 mx-auto"},m={class:"input-group-prepend mx-auto"},g={class:"input-group-append mx-auto"},j={class:"border-0 align-middle w-price"},O={class:"mb-0 ms-auto"},f={class:"border-0 align-middle"},N={class:"bg-custom"},V={scope:"row",class:"row g-0 border-0 font-weight-normal py-4"},y={class:"col-10"},v={class:"col-1 input-group-append"},k={class:"border-0 align-middle text-end fw-bold px-0",style:{"max-width":"160px"}},x={class:"border-0 align-middle"},C={class:"border-0 align-middle"},w={key:0,class:"bg-custom text-success"},S=Object(c["createVNode"])("th",null,null,-1),B=Object(c["createVNode"])("td",{class:"align-middle text-end fw-bold",style:{"max-width":"160px"}},[Object(c["createVNode"])("span",{class:""},"折扣價：")],-1),T=Object(c["createVNode"])("td",null,null,-1),$={class:"row justify-content-end"},M=Object(c["createTextVNode"])(" 下一步 "),_={key:1,class:"d-flex flex-column justify-content-center align-items-center mt-7"},L=Object(c["createVNode"])("img",{src:"http://pic.616pic.com/ys_b_img/00/09/39/Ls8lTFMQiU.jpg",alt:"",class:"img-fluid rounded-circle"},null,-1),U=Object(c["createVNode"])("p",{class:"fs-3 my-5"}," 購物車為空，請再逛逛或參考下方推薦商品唷~ ",-1),D={class:"container mt-5"},q=Object(c["createVNode"])("h3",{class:"mb-4 px-3 border-start border-5 border-chocolate"},"熱銷商品",-1);Object(c["popScopeId"])();var P=o((function(t,e,a,P,I,F){var J=Object(c["resolveComponent"])("font-awesome-icon"),E=Object(c["resolveComponent"])("router-link"),G=Object(c["resolveComponent"])("Swiper-products");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[0!=I.carts.total?(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[r,Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",i,[Object(c["createVNode"])("table",d,[l,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(I.carts.carts,(function(e,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{class:"border-bottom border-top",key:e.id},[Object(c["createVNode"])("th",p,[Object(c["createVNode"])("img",{src:e.product.imageUrl,alt:e.product.title,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,["src","alt"]),Object(c["createVNode"])("p",u,Object(c["toDisplayString"])(e.product.title),1)]),Object(c["createVNode"])("td",b,[Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",m,[I.loadingStatus==e.id?(Object(c["openBlock"])(),Object(c["createBlock"])(J,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("button",{class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon1",disabled:I.loadingStatus==e.id||e.qty<=1,onClick:function(t){return F.updateCart(e,e.qty-1)}},[Object(c["createVNode"])(J,{icon:"minus",class:"fas fa-minus"})],8,["disabled","onClick"])]),Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":function(t){return e.qty=t},ref:"input".concat(a),disabled:I.loadingStatus==e.id,onChange:function(t){return F.updateCart(e)}},null,40,["onUpdate:modelValue","disabled","onChange"]),[[c["vModelText"],e.qty,void 0,{number:!0}]]),Object(c["createVNode"])("div",g,[Object(c["createVNode"])("button",{class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon2",disabled:I.loadingStatus==e.id,onClick:function(t){return F.updateCart(e,e.qty+1)}},[Object(c["createVNode"])(J,{icon:"plus",class:"fas fa-plus"})],8,["disabled","onClick"])])])]),Object(c["createVNode"])("td",j,[Object(c["createVNode"])("p",O,"NT $"+Object(c["toDisplayString"])(t.$filter.currency(e.product.price)),1)]),Object(c["createVNode"])("td",f,[Object(c["createVNode"])("a",{href:"#",id:"tooltip",class:"cart-tooltip p-2",onClick:Object(c["withModifiers"])((function(t){return F.delItem(e.id)}),["prevent"]),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"刪除商品"},[Object(c["createVNode"])(J,{icon:"times",class:"fas fa-times"})],8,["onClick"])])])})),128)),Object(c["createVNode"])("tr",N,[Object(c["createVNode"])("th",V,[Object(c["createVNode"])("div",y,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0\n                      border-start-0 border-end-0 bg-custom",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(t){return I.couponCode=t})},null,512),[[c["vModelText"],I.couponCode]])]),Object(c["createVNode"])("div",v,[Object(c["createVNode"])("button",{class:"btn btn-outline-dark border-bottom border-top-0\n                border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return F.couponOn&&F.couponOn.apply(F,arguments)})},[Object(c["createVNode"])(J,{icon:"paper-plane",class:"fas fa-paper-plane"})])])]),Object(c["createVNode"])("td",k,[Object(c["createVNode"])("span",{class:{"text-decoration-line-through":I.carts.total!=I.carts.final_total}},"總額：",2)]),Object(c["createVNode"])("td",x,[Object(c["createVNode"])("span",{class:{"text-decoration-line-through":I.carts.total!=I.carts.final_total}},"NT $"+Object(c["toDisplayString"])(t.$filter.currency(I.carts.total)),3)]),Object(c["createVNode"])("td",C,["clear"==I.loadingStatus?(Object(c["openBlock"])(),Object(c["createBlock"])(J,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("a",{href:"#",id:"tooltip",class:"cart-tooltip position-relative p-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"清空購物車",onClick:e[3]||(e[3]=Object(c["withModifiers"])((function(){return F.clearCart&&F.clearCart.apply(F,arguments)}),["prevent"]))},[I.carts.cartsLength?(Object(c["openBlock"])(),Object(c["createBlock"])(J,{key:0,icon:"times",class:"fas fa-times text-chocolate"})):Object(c["createCommentVNode"])("",!0)])])]),I.carts.total!=I.carts.final_total?(Object(c["openBlock"])(),Object(c["createBlock"])("tr",w,[S,B,Object(c["createVNode"])("td",null,"NT $"+Object(c["toDisplayString"])(t.$filter.currency(I.carts.final_total)),1),T])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])("div",$,[Object(c["createVNode"])(E,{to:"/cart/profile",class:["col-1 mx-5 btn btn-chocolight",{disabled:0==I.carts.total}],style:{"min-width":"120px"}},{default:o((function(){return[M]})),_:1},8,["class"])])])])])):Object(c["createCommentVNode"])("",!0),0==I.carts.total?(Object(c["openBlock"])(),Object(c["createBlock"])("div",_,[L,U])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",D,[q,Object(c["createVNode"])(G,{products:I.products,column:4},null,8,["products"])])],64)})),I=(a("99af"),a("262f")),F=a("e0d5"),J={components:{SwiperProducts:I["a"]},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",carts:{},products:{},loadingStatus:"",isLoading:!1,couponCode:"",tooltipList:null}},methods:{getCart:function(){this.emitter.emit("navGetCart")},updateCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.qty;if(a<1)return this.$swal("商品數量最少為一件!"),void this.getCart();this.loadingStatus=t.id;var c={product_id:t.product_id,qty:a},o="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t.id);this.axios.put(o,{data:c}).then((function(t){t.data.success?(e.$httpToastMessage(t,t.data.message),e.getCart()):e.$httpToastMessage(t.data.message),e.loadingStatus=""})).catch((function(t){e.loadingStatus="",e.$httpToastMessage(0,t)}))},clearCart:function(){var t=this;this.loadingStatus="clear";var e="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/carts");this.axios.delete(e).then((function(e){e.data.success?(t.$httpToastMessage(e,e.data.message),t.getCart()):(console.log(e.data.message),t.$httpToastMessage(e,e.data.message)),t.loadingStatus=""})).catch((function(e){t.loadingStatus="",t.$httpToastMessage(0,e)}))},delItem:function(t){var e=this;this.loadingStatus=t;var a="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t);this.axios.delete(a).then((function(t){t.data.success?(e.$httpToastMessage(t,t.data.message),e.getCart()):e.$httpToastMessage(t,t.data.message),e.loadingStatus=""})).catch((function(t){e.loadingStatus="",e.$httpToastMessage(0,t)}))},getData:function(){var t=this;this.emitter.emit("isLoading",!0),this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/products/all")).then((function(e){e.data.success?(t.products=F(e.data.products),t.tempProducts=e.data.products):t.$httpToastMessage(e,e.data.message),t.emitter.emit("isLoading",!1)})).catch((function(e){t.emitter.emit("isLoading",!1),t.$httpToastMessage(0,e)}))},couponOn:function(){var t=this;this.emitter.emit("isLoading",!0);var e={code:this.couponCode};this.axios.post("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/coupon"),{data:e}).then((function(e){e.data.success?(t.couponData=e.data.final_total,t.$httpToastMessage(e,e.data.message)):t.$httpToastMessage(e,e.data.message),t.emitter.emit("isLoading",!1)})).catch((function(e){t.emitter.emit("isLoading",!1),t.$httpToastMessage(0,e)}))}},created:function(){var t=this;this.emitter.on("cartBus",(function(e){e&&(t.carts=e)}))},unmounted:function(){this.emitter.off("cartBus")},mounted:function(){this.getCart(),this.getData()}};a("ff19");J.render=P,J.__scopeId="data-v-5140480a";e["default"]=J},a74f:function(t,e,a){},ff19:function(t,e,a){"use strict";a("a74f")}}]);
//# sourceMappingURL=chunk-2c8474e7.57a3de66.js.map