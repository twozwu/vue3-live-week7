(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6812aeb5"],{"1ac7":function(e,t,a){},2532:function(e,t,a){"use strict";var c=a("23e7"),o=a("5a34"),r=a("1d80"),i=a("ab13");c({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(r(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"2ac8":function(e,t,a){"use strict";var c=a("7a23"),o=Object(c["withScopeId"])("data-v-35faf671");Object(c["pushScopeId"])("data-v-35faf671");var r=Object(c["createVNode"])("img",{src:"https://bi.im-g.pl/im/a5/71/17/z24584101AMP,Kakao.jpg",class:"card-img-top rounded-0 mh-500",alt:"..."},null,-1),i=Object(c["createVNode"])("img",{src:"https://nutrativa.com.br/wp-content/uploads/2020/03/0319202001-polifen%C3%B3is-banner.jpg",class:"card-img-top rounded-0 mh-500",alt:"..."},null,-1),n=Object(c["createVNode"])("img",{src:"https://cdn1.matadornetwork.com/blogs/2/2020/01/Chocolate-mexicano-historia-1200x853.jpg",class:"card-img-top rounded-0 mh-500",alt:"..."},null,-1),s=Object(c["createVNode"])("img",{src:"https://i.pinimg.com/originals/ce/16/75/ce16757f71272ee9a7bab2434a99350c.jpg",class:"card-img-top rounded-0 mh-500",style:{"object-position":"center 35%"},alt:"..."},null,-1);Object(c["popScopeId"])();var d=o((function(e,t,a,d,l,u){var p=Object(c["resolveComponent"])("swiper-slide"),b=Object(c["resolveComponent"])("swiper");return Object(c["openBlock"])(),Object(c["createBlock"])(b,{slidesPerView:1,spaceBetween:30,centeredSlides:!1,autoplay:{delay:5e3,disableOnInteraction:!1},class:"mySwiper"},{default:o((function(){return[Object(c["createVNode"])(p,null,{default:o((function(){return[r]})),_:1}),Object(c["createVNode"])(p,null,{default:o((function(){return[i]})),_:1}),Object(c["createVNode"])(p,null,{default:o((function(){return[n]})),_:1}),Object(c["createVNode"])(p,null,{default:o((function(){return[s]})),_:1})]})),_:1})})),l=a("90ea"),u=a("a16a"),p=(a("5f67"),a("6d3b")),b=a("d17a");p["a"].use([b["a"]]);var h={components:{Swiper:l["a"],SwiperSlide:u["a"]}};a("5da8");h.render=d,h.__scopeId="data-v-35faf671";t["a"]=h},"44e7":function(e,t,a){var c=a("861d"),o=a("c6b6"),r=a("b622"),i=r("match");e.exports=function(e){var t;return c(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},"58f1":function(e,t,a){},"5a34":function(e,t,a){var c=a("44e7");e.exports=function(e){if(c(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5da8":function(e,t,a){"use strict";a("58f1")},a09f:function(e,t,a){"use strict";a.r(t);a("caad"),a("2532");var c=a("7a23"),o={class:"container-xl"},r={key:0,class:"row"},i=Object(c["createVNode"])("p",{class:"h3 text-center"},"我的最愛項目為空",-1),n={key:1,class:"row"},s={class:"card border-0 mb-4 position-relative"},d={class:"position-relative"},l={class:"card-body p-0"},u={class:"mb-0 mt-3 fw-bold"},p={class:"card-text mb-0"},b={class:"text-muted "},h=Object(c["createVNode"])("p",{class:"text-muted mt-3"},null,-1),m={class:"row g-1 justify-content-around"},f=Object(c["createTextVNode"])("詳細資料"),j=Object(c["createTextVNode"])("加入購物車 ");function O(e,t,a,O,v,g){var y=Object(c["resolveComponent"])("loading"),N=Object(c["resolveComponent"])("swiper-header"),V=Object(c["resolveComponent"])("router-link"),k=Object(c["resolveComponent"])("font-awesome-icon"),x=Object(c["resolveComponent"])("detailComponent");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(y,{active:v.isLoading},null,8,["active"]),Object(c["createVNode"])(N,{class:"mb-5"}),Object(c["createVNode"])("div",o,[v.favoriteItems.length?(Object(c["openBlock"])(),Object(c["createBlock"])("div",n,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(v.favoriteItems,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"col-md-4 cardBorder pt-2",key:t.id},[Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("a",{href:"#/detail/".concat(t.id),class:"imgTop"},[Object(c["createVNode"])("img",{src:t.imageUrl,class:"card-img-top rounded-0 max-height ",alt:t.title},null,8,["src","alt"])],8,["href"])]),Object(c["createVNode"])("a",{href:"#",class:" text-dark",onClick:Object(c["withModifiers"])((function(e){return g.addFavorite(t)}),["prevent"])},[Object(c["createVNode"])("i",{class:["far fa-heart position-absolute",{fas:v.myFavorite.includes(t.id),"text-danger":v.myFavorite.includes(t.id)}],style:{right:"16px",top:"16px"}},null,2)],8,["onClick"]),Object(c["createVNode"])("div",l,[Object(c["createVNode"])("h5",u,[Object(c["createVNode"])("a",{href:"#/detail/".concat(t.id)},Object(c["toDisplayString"])(t.title),9,["href"])]),Object(c["createVNode"])("p",p,[Object(c["createTextVNode"])(" NT$"+Object(c["toDisplayString"])(e.$filter.currency(t.price))+" ",1),Object(c["createVNode"])("span",b,[Object(c["createVNode"])("del",null,"NT$"+Object(c["toDisplayString"])(e.$filter.currency(t.origin_price)),1)])]),h,Object(c["createVNode"])("div",m,[Object(c["createVNode"])(V,{class:"col-5 btn btn-outline-chocolate",to:"/detail/".concat(t.id)},{default:Object(c["withCtx"])((function(){return[f]})),_:2},1032,["to"]),Object(c["createVNode"])("button",{class:"col-5 btn btn-chocolight",onClick:function(e){return g.addToCart(t.id)}},[v.loadingStatus==t.id?(Object(c["openBlock"])(),Object(c["createBlock"])(k,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),j],8,["onClick"])])])])])})),128)),Object(c["createVNode"])(x,{ref:"detail",product:v.tempProducts},null,8,["product"])])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[i]))])],64)}a("99af"),a("a434");var v=a("d2f1"),g=a("2ac8"),y=a("3a5e"),N={components:{detailComponent:v["a"],SwiperHeader:g["a"],Loading:y["a"]},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",products:{},tempProducts:{},loadingStatus:"",isActive:"all",isLoading:!1,myFavorite:[],favoriteItems:[]}},methods:{favoriteSet:function(e){var t=JSON.stringify(e);localStorage.setItem("favorite",t)},favoriteGet:function(){var e=localStorage.getItem("favorite");e&&(this.myFavorite=JSON.parse(e))},getData:function(){var e=this;this.isLoading=!0,this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/products/all")).then((function(t){t.data.success?(e.products=t.data.products,e.favoriteFilter()):e.$httpToastMessage(t,t.data.message),e.isLoading=!1})).catch((function(e){return console.log(e)}))},addToCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loadingStatus=e;var c={product_id:e,qty:a},o="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart");this.axios.post(o,{data:c}).then((function(e){e.data.success?(t.$httpToastMessage(e,"加入購物車"),t.emitter.emit("navGetCart")):t.$httpToastMessage(e,e.data.message),t.loadingStatus=""})).catch((function(e){return console.log(e)}))},favoriteFilter:function(){for(var e=0;e<this.myFavorite.length;e+=1)for(var t=0;t<this.products.length;t+=1)this.myFavorite[e]===this.products[t].id&&this.favoriteItems.push(this.products[t])},addFavorite:function(e){this.myFavorite.includes(e.id)?(this.myFavorite.splice(this.myFavorite.indexOf(e.id),1),this.$httpToastMessage(!1,"移除我的最愛 成功"),this.favoriteItems.splice(this.favoriteItems.indexOf(e),1)):(this.myFavorite.push(e.id),this.$httpToastMessage(!0,"加入我的最愛 成功")),this.favoriteSet(this.myFavorite),this.emitter.emit("navFavoriteLength")}},created:function(){var e=this;this.emitter.on("productsBus",(function(t){e.products=t}))},mounted:function(){this.getData(),this.favoriteGet()}};a("ee17");N.render=O;t["default"]=N},ab13:function(e,t,a){var c=a("b622"),o=c("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(c){}}return!1}},caad:function(e,t,a){"use strict";var c=a("23e7"),o=a("4d64").includes,r=a("44d2");c({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d2f1:function(e,t,a){"use strict";a("a4d3"),a("e01a");var c=a("7a23"),o={class:"modal fade",id:"detailComponent",tabindex:"-1",role:"dialog","aria-labelledby":"detailComponentLabel","aria-hidden":"true",ref:"modal"},r={class:"modal-dialog modal-xl",role:"document"},i={class:"modal-content border-0"},n={class:"modal-header bg-dark text-white"},s={class:"modal-title",id:"exampleModalLabel"},d=Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),l={class:"modal-body"},u={class:"row"},p={class:"col-sm-6"},b={class:"col-sm-6"},h={class:"badge bg-primary rounded-pill"},m={key:0,class:"h5"},f={key:1,class:"h6"},j={key:2,class:"h5"},O={class:"input-group d-flex align-items-center"},v=Object(c["createVNode"])("label",{for:"qty",class:""},"數量：",-1),g=Object(c["createTextVNode"])("加入購物車 "),y={key:0,class:"ms-5 text-danger"};function N(e,t,a,N,V,k){var x=Object(c["resolveComponent"])("font-awesome-icon");return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("div",i,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("h5",s,[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(a.product.title),1)]),d]),Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("img",{class:"img-fluid",src:a.product.imageUrl,alt:""},null,8,["src"])]),Object(c["createVNode"])("div",b,[Object(c["createVNode"])("span",h,Object(c["toDisplayString"])(a.product.category),1),Object(c["createVNode"])("p",null,"商品描述："+Object(c["toDisplayString"])(a.product.description),1),Object(c["createVNode"])("p",null,"商品內容："+Object(c["toDisplayString"])(a.product.content),1),a.product.price?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("div",m,Object(c["toDisplayString"])(a.product.origin_price)+" 元",1)),a.product.price?(Object(c["openBlock"])(),Object(c["createBlock"])("del",f,"原價 "+Object(c["toDisplayString"])(a.product.origin_price)+" 元",1)):Object(c["createCommentVNode"])("",!0),a.product.price?(Object(c["openBlock"])(),Object(c["createBlock"])("div",j,"現在只要 "+Object(c["toDisplayString"])(a.product.price)+" 元",1)):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",null,[Object(c["createVNode"])("div",O,[v,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control",id:"qty","onUpdate:modelValue":t[1]||(t[1]=function(e){return V.qty=e}),min:"1",placeholder:"數量",onChange:t[2]||(t[2]=function(){return k.checkQty&&k.checkQty.apply(k,arguments)})},null,544),[[c["vModelText"],V.qty,void 0,{number:!0}]]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(e){return k.addToCart(a.product.id,V.qty)})},[V.loadingStatus==a.product.id?(Object(c["openBlock"])(),Object(c["createBlock"])(x,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),g])]),V.failQty?(Object(c["openBlock"])(),Object(c["createBlock"])("span",y,"商品數量最少為一件!")):Object(c["createCommentVNode"])("",!0)])])])])])])],512)}a("99af");var V=a("7c2b"),k=a.n(V),x={props:["product"],data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",qty:1,loadingStatus:"",modal:"",failQty:!1}},methods:{addToCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loadingStatus=e;var c={product_id:e,qty:a},o="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart");this.axios.post(o,{data:c}).then((function(e){e.data.success?(alert(e.data.message),t.loadingStatus="",t.emitter.emit("navGetCart")):(alert(e.data.message),t.loadingStatus="")})).catch((function(e){return console.log(e)}))},openModal:function(){this.qty=1,this.modal.show()},hideModal:function(){this.modal.hide()},checkQty:function(){this.qty<=1&&(this.failQty=!0,this.qty=1)}},mounted:function(){this.modal=new k.a(this.$refs.modal,{keyboard:!0,backdrop:!0})}};x.render=N;t["a"]=x},ee17:function(e,t,a){"use strict";a("1ac7")}}]);
//# sourceMappingURL=chunk-6812aeb5.a4b32297.js.map