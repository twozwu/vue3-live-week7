(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1389befd"],{"0722":function(t,e,a){"use strict";a("7499")},"3b3f":function(t,e,a){"use strict";a.r(e);var c=a("7a23"),o=Object(c["withScopeId"])("data-v-1c67de2b");Object(c["pushScopeId"])("data-v-1c67de2b");var s={class:"mt-3"},r=Object(c["createVNode"])("h3",{class:"mt-6 mb-4 px-3 border-start border-5 border-chocolate"},"商品列表",-1),n={class:"row"},d={class:"col-md table-responsive"},i={class:"table"},l=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",{class:"text-light bg-chocolate"},[Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-s"},"品項"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"數量"),Object(c["createVNode"])("th",{scope:"col",class:"border-0"},"價格"),Object(c["createVNode"])("th",{scope:"col",class:"tableBorder-e"})])],-1),b={scope:"row",class:"border-0 px-2 font-weight-normal py-4 w-sm-title",style:{}},u={class:"mb-0 fw-bold ms-md-3 d-md-inline-block d-sm-block"},p={class:"border-0 align-middle w-sm-qty",style:{"max-width":"100px"}},h={class:"input-group pe-md-5 pe-4"},m={class:"input-group-prepend"},O={class:"input-group-append"},g={class:"border-0 align-middle"},j={class:"mb-0 ms-auto"},f={class:"border-0 align-middle"},N={key:0,class:"text-center"},V=Object(c["createVNode"])("td",{colspan:"4"},[Object(c["createVNode"])("p",null,"購物車為空，請下單完再送出唷~")],-1),v={class:"bg-custom"},y={scope:"row",class:"row g-0 border-0 font-weight-normal py-4"},k={class:"col-11"},C={class:"col-1 input-group-append"},x={class:"border-0 align-middle text-end fw-bold",style:{"max-width":"160px"}},w={class:"border-0 align-middle"},S={class:"border-0 align-middle"},B={href:"#",class:"cart-tooltip position-relative","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"清空購物車"},T=Object(c["createVNode"])("div",{class:"toolbox"},"清空購物車",-1),$={key:1,class:"bg-custom text-success"},M=Object(c["createVNode"])("th",null,null,-1),D=Object(c["createVNode"])("td",{class:"align-middle text-end fw-bold",style:{"max-width":"160px"}},[Object(c["createVNode"])("span",{class:""},"折扣價：")],-1),U=Object(c["createVNode"])("td",null,null,-1),_={class:"row justify-content-end"},q=Object(c["createTextVNode"])("下一步"),P={class:"container mt-5"},L=Object(c["createVNode"])("h3",{class:"mb-4 px-3 border-start border-5 border-chocolate"},"熱銷商品",-1);Object(c["popScopeId"])();var I=o((function(t,e,a,I,F,J){var E=Object(c["resolveComponent"])("font-awesome-icon"),G=Object(c["resolveComponent"])("router-link"),R=Object(c["resolveComponent"])("swiper-products");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",s,[r,Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("table",i,[l,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(F.carts.carts,(function(e,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{class:"border-bottom border-top",key:e.id},[Object(c["createVNode"])("th",b,[Object(c["createVNode"])("img",{src:e.product.imageUrl,alt:e.product.title,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,["src","alt"]),Object(c["createVNode"])("p",u,Object(c["toDisplayString"])(e.product.title),1)]),Object(c["createVNode"])("td",p,[Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",m,[F.loadingStatus==e.id?(Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("button",{class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon1",disabled:F.loadingStatus==e.id||e.qty<=1,onClick:function(t){return J.updateCart(e,e.qty-1)}},[Object(c["createVNode"])(E,{icon:"minus",class:"fas fa-minus"})],8,["disabled","onClick"])]),Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":function(t){return e.qty=t},ref:"input".concat(a),disabled:F.loadingStatus==e.id,onChange:function(t){return J.updateCart(e)}},null,40,["onUpdate:modelValue","disabled","onChange"]),[[c["vModelText"],e.qty,void 0,{number:!0}]]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("button",{class:"btn btn-outline-chocolight border-0 py-2",type:"button",id:"button-addon2",disabled:F.loadingStatus==e.id,onClick:function(t){return J.updateCart(e,e.qty+1)}},[Object(c["createVNode"])(E,{icon:"plus",class:"fas fa-plus"})],8,["disabled","onClick"])])])]),Object(c["createVNode"])("td",g,[Object(c["createVNode"])("p",j,"NT $"+Object(c["toDisplayString"])(t.$filter.currency(e.product.price)),1)]),Object(c["createVNode"])("td",f,[Object(c["createVNode"])("a",{href:"#",onClick:Object(c["withModifiers"])((function(t){return J.delItem(e.id)}),["prevent"])},[Object(c["createVNode"])(E,{icon:"times",class:"fas fa-times"})],8,["onClick"])])])})),128)),0==F.carts.total?(Object(c["openBlock"])(),Object(c["createBlock"])("tr",N,[V])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("tr",v,[Object(c["createVNode"])("th",y,[Object(c["createVNode"])("div",k,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0\n                      border-start-0 border-end-0 bg-custom",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(t){return F.couponCode=t})},null,512),[[c["vModelText"],F.couponCode]])]),Object(c["createVNode"])("div",C,[Object(c["createVNode"])("button",{class:"btn btn-outline-dark border-bottom border-top-0\n                border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return J.couponOn&&J.couponOn.apply(J,arguments)})},[Object(c["createVNode"])(E,{icon:"paper-plane",class:"fas fa-paper-plane"})])])]),Object(c["createVNode"])("td",x,[Object(c["createVNode"])("span",{class:{"text-decoration-line-through":F.carts.total!=F.carts.final_total}},"總額：",2)]),Object(c["createVNode"])("td",w,[Object(c["createVNode"])("span",{class:{"text-decoration-line-through":F.carts.total!=F.carts.final_total}},"NT $"+Object(c["toDisplayString"])(t.$filter.currency(F.carts.total)),3)]),Object(c["createVNode"])("td",S,["clear"==F.loadingStatus?(Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:0,icon:"spinner",pulse:"",class:"fas fa-spinner fa-pulse"})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("a",B,[T,F.carts.cartsLength?(Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:0,icon:"times",class:"fas fa-times text-chocolate",onClick:Object(c["withModifiers"])(J.clearCart,["prevent"])},null,8,["onClick"])):Object(c["createCommentVNode"])("",!0)])])]),F.carts.total!=F.carts.final_total?(Object(c["openBlock"])(),Object(c["createBlock"])("tr",$,[M,D,Object(c["createVNode"])("td",null,"NT $"+Object(c["toDisplayString"])(t.$filter.currency(F.carts.final_total)),1),U])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])("div",_,[Object(c["createVNode"])(G,{to:"/cart/profile",class:"col-1 mx-5 btn btn-chocolight",tag:"button",style:{"min-width":"120px"}},{default:o((function(){return[q]})),_:1})])])])]),Object(c["createVNode"])("div",P,[L,Object(c["createVNode"])(R,{products:F.products,column:4},null,8,["products"])])],64)})),F=(a("99af"),a("262f")),J=a("e0d5"),E={components:{swiperProducts:F["a"]},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",carts:{},products:{},loadingStatus:"",isLoading:!1,couponCode:"",couponData:{}}},methods:{getCart:function(){this.emitter.emit("navGetCart")},updateCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.qty;if(a<1)return alert("商品數量最少為一件!"),void this.getCart();this.loadingStatus=t.id;var c={product_id:t.product_id,qty:a},o="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t.id);this.axios.put(o,{data:c}).then((function(t){t.data.success?(e.$httpToastMessage(t,t.data.message),e.loadingStatus="",e.getCart()):(console.log(t.data.message),e.loadingStatus="")})).catch((function(t){return console.log(t)}))},clearCart:function(){var t=this;this.loadingStatus="clear";var e="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/carts");this.axios.delete(e).then((function(e){e.data.success?(t.$httpToastMessage(e,e.data.message),t.getCart(),t.loadingStatus=""):(console.log(e.data.message),t.$httpToastMessage(e,e.data.message),t.loadingStatus="")})).catch((function(t){return console.log(t)}))},delItem:function(t){var e=this;this.loadingStatus=t;var a="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t);this.axios.delete(a).then((function(t){t.data.success?(e.$httpToastMessage(t,t.data.message),e.loadingStatus="",e.getCart()):(e.$httpToastMessage(t,t.data.message),e.loadingStatus="")})).catch((function(t){return console.log(t)}))},getData:function(){var t=this;this.emitter.emit("isLoading",!0),this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/products/all")).then((function(e){e.data.success?(t.products=J(e.data.products),t.tempProducts=e.data.products):t.$httpToastMessage(e,e.data.message),t.emitter.emit("isLoading",!1)})).catch((function(t){return console.log(t)}))},couponOn:function(){var t=this;this.emitter.emit("isLoading",!0);var e={code:this.couponCode};this.axios.post("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/coupon"),{data:e}).then((function(e){e.data.success?(t.couponData=e.data.final_total,t.$httpToastMessage(e,e.data.message)):t.$httpToastMessage(e,e.data.message),t.emitter.emit("isLoading",!1)})).catch((function(t){return console.log(t)}))}},created:function(){var t=this;this.emitter.on("cartBus",(function(e){e&&(t.carts=e)}))},mounted:function(){this.getCart(),this.getData()}};a("0722");E.render=I,E.__scopeId="data-v-1c67de2b";e["default"]=E},7499:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1389befd.f1ecf21b.js.map