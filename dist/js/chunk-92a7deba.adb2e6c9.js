(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92a7deba"],{b0c0:function(e,t,a){var c=a("83ab"),r=a("9bf2").f,o=Function.prototype,s=o.toString,l=/^\s*function ([^ (]*)/,d="name";c&&!(d in o)&&r(o,d,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},c66d:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b64b");var c=a("7a23"),r={class:"mt-3"},o=Object(c["createVNode"])("h3",{class:"mt-6 mb-4 mx-md-6 px-3 border-start border-5 border-chocolate"},"填寫資料",-1),s={class:"row px-md-6"},l={class:"col-md-7"},d=Object(c["createVNode"])("p",{class:""},"請輸入聯絡資訊：",-1),n={class:"mb-0"},i=Object(c["createVNode"])("label",{for:"ContactMail",class:"text-muted mb-0"},[Object(c["createTextVNode"])("信箱"),Object(c["createVNode"])("span",{class:"text-danger"}," *")],-1),b=Object(c["createVNode"])("p",{class:"mt-5"},"請輸入寄送資訊：",-1),m={class:"mb-2"},u=Object(c["createVNode"])("label",{for:"ContactName",class:"text-muted mb-0"},[Object(c["createTextVNode"])("姓名"),Object(c["createVNode"])("span",{class:"text-danger"}," *")],-1),f={class:"mb-2"},p=Object(c["createVNode"])("label",{for:"ContactPhone",class:"text-muted mb-0"},[Object(c["createTextVNode"])("連絡電話"),Object(c["createVNode"])("span",{class:"text-danger"}," *")],-1),j={class:"mb-2"},O=Object(c["createVNode"])("label",{for:"ContactPhone",class:"text-muted mb-0"},[Object(c["createTextVNode"])("連絡地址"),Object(c["createVNode"])("span",{class:"text-danger"}," *")],-1),V={class:"mb-2"},h=Object(c["createVNode"])("label",{for:"ContactMessage",class:"text-muted mb-0"},"意見回覆",-1),N={class:"d-flex mt-4 justify-content-between align-items-end"},v={href:"#/cart",class:"text-dark mt-md-0 mt-3 align-self-center"},g=Object(c["createTextVNode"])(" 回到上一步"),x={class:"col-md-5"},w={class:"border p-4 mb-4 mt-md-0 mt-6"},y=Object(c["createVNode"])("h4",{class:" mb-4"},"我的訂單",-1),k={class:"w-100"},C={class:"d-flex justify-content-between"},T={class:"mb-0 fw-bold"},S={class:"mb-0"},D={class:"mb-0 fw-normal"},$={class:"table text-muted border-top border-bottom mt-4"},U=Object(c["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"原價",-1),B={class:"text-end border-0 px-0 pt-4"},M=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),Object(c["createVNode"])("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),q={class:"d-flex justify-content-between mt-4"},L=Object(c["createVNode"])("p",{class:"mb-0 h4 fw-bold"},"總計",-1),P={class:"mb-0 h4 fw-bold"},F=Object(c["createVNode"])("a",{href:"#/products",class:"btn btn-outline-chocolight w-100 mt-4"},"繼續購物",-1);function E(e,t,a,E,J,_){var A=Object(c["resolveComponent"])("loading"),G=Object(c["resolveComponent"])("Field"),I=Object(c["resolveComponent"])("ErrorMessage"),z=Object(c["resolveComponent"])("font-awesome-icon"),H=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(A,{active:J.isLoading},null,8,["active"]),Object(c["createVNode"])("div",r,[o,Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])(H,{ref:"form",onSubmit:_.createOrder},{default:Object(c["withCtx"])((function(e){var a=e.errors;return[d,Object(c["createVNode"])("div",n,[i,Object(c["createVNode"])(G,{id:"email",name:"email",type:"email",class:["form-control fw-light",{"is-invalid":a["email"],"is-valid":J.form.user.email}],placeholder:"請輸入 Email",rules:"email|required",modelValue:J.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return J.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(I,{name:"email",class:"invalid-feedback"})]),b,Object(c["createVNode"])("div",m,[u,Object(c["createVNode"])(G,{id:"name",name:"姓名",type:"text",class:["form-control fw-light",{"is-invalid":a["姓名"],"is-valid":J.form.user.name}],placeholder:"請輸入姓名",rules:"required",modelValue:J.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(I,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",f,[p,Object(c["createVNode"])(G,{id:"tel",name:"電話",type:"tel",class:["form-control fw-light",{"is-invalid":a["電話"],"is-valid":J.form.user.tel}],placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:J.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(I,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",j,[O,Object(c["createVNode"])(G,{id:"address",name:"地址",type:"text",class:["form-control fw-light",{"is-invalid":a["地址"],"is-valid":J.form.user.address}],placeholder:"請輸入地址",rules:"required",modelValue:J.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return J.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(I,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",V,[h,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{class:"form-control fw-light",rows:"6",id:"ContactMessage",placeholder:"message ... ","onUpdate:modelValue":t[5]||(t[5]=function(e){return J.form.message=e})},null,512),[[c["vModelText"],J.form.message]])]),Object(c["createVNode"])("div",N,[Object(c["createVNode"])("a",v,[Object(c["createVNode"])(z,{icon:"chevron-left",class:"fas fa-chevron-left me-2"}),g]),Object(c["createVNode"])("button",{type:"submit",class:"btn btn-chocolight py-2 px-5",disabled:Object.keys(a).length||!_.checkData}," 送出訂單 ",8,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",x,[Object(c["createVNode"])("div",w,[y,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(J.carts.carts,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"d-flex mb-2",key:t.id},[Object(c["createVNode"])("img",{src:t.product.imageUrl,alt:t.product.title,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,["src","alt"]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",C,[Object(c["createVNode"])("p",T,Object(c["toDisplayString"])(t.product.title),1),Object(c["createVNode"])("p",S,"NT$"+Object(c["toDisplayString"])(e.$filter.currency(t.product.price)),1)]),Object(c["createVNode"])("p",D,"x"+Object(c["toDisplayString"])(t.qty+t.product.unit),1)])])})),128)),Object(c["createVNode"])("table",$,[Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[U,Object(c["createVNode"])("td",B,"NT$"+Object(c["toDisplayString"])(e.$filter.currency(J.carts.total)),1)]),M])]),Object(c["createVNode"])("div",q,[L,Object(c["createVNode"])("p",P,"NT$"+Object(c["toDisplayString"])(e.$filter.currency(J.carts.final_total)),1)]),F])])])])],64)}a("99af");var J=a("3a5e"),_={components:{Loading:J["a"]},data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io",apiPath:"chocolate",carts:{},qty:1,loadingStatus:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{createOrder:function(){var e=this;this.isLoading=!0;var t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/order"),a=this.form;this.axios.post(t,{data:a}).then((function(t){t.data.success?(e.isLoading=!1,e.emitter.emit("navGetCart"),e.$httpToastMessage(t,"訂單送出"),e.$router.push("/cart/order/".concat(t.data.orderId))):(console.log(t.data.message),e.$httpToastMessage(t,t.data.message))})).catch((function(e){return console.log(e)}))}},created:function(){var e=this;this.emitter.on("cartBus",(function(t){t&&(e.carts=t)}))},mounted:function(){this.emitter.emit("navSendData"),this.emitter.emit("toProgress",50)},computed:{checkData:function(){var e=this,t=["name","email","tel","address"];return t.every((function(t){return""!==e.form.user[t]}))}}};_.render=E;t["default"]=_}}]);
//# sourceMappingURL=chunk-92a7deba.adb2e6c9.js.map